function getEquation(){return window.equation}function setEquation(e){window.equation=e,window.equationUI.value=e}function getSolution(){return window.solution}function setSolution(e){window.solution=e,window.solutionUI.value=e}function bttnHandler(e){if(isNum(e))isOperator(previousVal)&&setSolution(""),"0"===e&&"/"===previousVal&&errorMsg("Cannot divide by zero"),setSolution(Number(getSolution()+e)),previousVal=e;else if(isOperator(e)){isOperator(previousVal)&&(setSolution(getSolution().slice(0,-1)),errorMsg("Cannot do '"+previousVal+e+"'. ")),setEquation(0===numbers.length?getSolution()+e:getEquation()+getSolution()+e),splitEqn(getEquation());var t=solveEqn(numbers,operators);setSolution(t),previousVal=e}else if("."===e)setSolution(getSolution()+"."),previousVal=e;else if("clear"===e)setEquation(""),setSolution(""),previousVal=e;else if("percent"===e)setSolution(100*getSolution()),previousVal=e;else if("sqrt"===e)setSolution(Math.sqrt(getSolution())),previousVal=e;else if("squared"===e)setSolution(getSolution()*getSolution()),previousVal=e;else if("backspace"===e)setSolution(getSolution().slice(0,-1)),previousVal=e;else if("equals"===e){setEquation(getEquation()+getSolution()),splitEqn(getEquation());var t=solveEqn(numbers,operators);setSolution(t),previousVal=e}}function solveEqn(e,t){var o;o=solveSimple(e[0],t[0],e[1]);for(var r=1,n=operators.length;r<n;r++)e[r+1]&&(o=solveSimple(o,t[r],e[r+1]));return o}function solveSimple(e,t,o){if(e=Number(e),o=Number(o),!o)return"";switch(t){case"*":return e*o;case"/":return e/o;case"+":return e+o;case"-":return e-o;default:return errorMsg("Unknown Operation"),"Unknown Operation"}}function splitEqn(e){if(numbers=[],operators=[],isOperator(e.charAt(0)))return errorMsg("Must start with an operator"),"started with operator";for(var t=0,o=0,r=e.length,n="";t<r;t++)if(n=e.charAt(t),isOperator(n)){if(isOperator(e.charAt(t-1)))return errorMsg("Can't do two operators in a row. "),"Can't do two operators in a row. ";operators.push(n),o++}else{if(!isNum(n))return errorMsg("Unknown Error. Please contact my creator: deep@deepduggal.me"),"unknown error";if("0"===n&&"/"===e.charAt(t-1))return errorMsg("Can't divide by zero. "),"Can't divide by zero. ";numbers[o]?numbers[o]+=n:numbers.push(n)}}function numOps(e){for(var t=0,o=0,r=e.length;o<r;o++)isOperator(e.charAt(o))&&t++;return t}function isNum(e){return!isNaN(parseFloat(e))&&isFinite(e)}function isOperator(e){return"*"===e||"/"===e||"+"===e||"-"===e}function errorMsg(e){getSolution();setSolution(e)}var equationUI=document.getElementById("equation"),solutionUI=document.getElementById("solution"),equation="",solution="",numbers=[],operators=[],previousVal="";document.body.onclick=function(e){var t=e.target.getAttribute("name"),o={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",decimalPoint:".",divide:"/",multiply:"*",subtract:"-",add:"+",equals:"equals",clear:"clear",percent:"percent",squareRoot:"sqrt",squared:"squared",backspace:"backspace"};o.hasOwnProperty(t)&&bttnHandler(o[t]),e.stopPropagation()};